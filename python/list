#!/usr/bin/env python3

from types import GeneratorType

a = [0]  # An empty list
b = (1,2,3)
a.extend(b)  # roughly equivalent to 'for v in b: a.append(v)'
assert( a == [0,1,2,3])
a.append(b)
assert( a == [0,1,2,3,(1,2,3)])

# lists are passed by reference
def mutate(b, x=5):
    b.append(x)

assert( a == [0,1,2,3,(1,2,3)])
mutate(a, 5)  # A is mutated by the call
assert( a == [0,1,2,3,(1,2,3),5])
mutate(list(a), 9)  # Pass a copy to avoid mutation

# list comprehension:
# [expression(i) for i in list if filter(i)]
a = [1, 2, 3]
b = [x for x in a if x % 2]
assert( type(b) == list )
assert( b == [1, 3])


# You cannot apply builtin len() to a generator
def length(x):
    t = type(x)
    c = 0
    for i in x:
        c += 1
    return c, t


x = (a for a in [1, 2, 3])  # x is a generator object ...
assert isinstance(x, GeneratorType)

# A generator can only be iterated over once
t = type(x)
assert (3, t) == length(x)
assert (0, t) == length(x)


x = (1,2,3,4,5,6)
# Find the number of elements in the list that match a condition:
# (a < 4 for a in x) is the generator object that yields
# [True, True, True, False, False, False]
assert sum(a < 4 for a in x) == 3
assert (6, GeneratorType) == length(a < 4 for a in x)

# slicing gives a shallow copy
a = [1,2,3]
b = [1, 2, a, 3]
b[2][0] = 'foo'  # This modifies a
c = b[2:]
assert a == ['foo', 2, 3]
c[0][0] = 'bar'  # This also modifies a
assert a == ['bar', 2, 3]


# Methods defined on a list, and their help messages:
"""
append(object, /) method of builtins.list instance
    Append object to the end of the list.

clear() method of builtins.list instance
    Remove all items from list.

copy() method of builtins.list instance
    Return a shallow copy of the list.

count(value, /) method of builtins.list instance
    Return number of occurrences of value.

extend(iterable, /) method of builtins.list instance
    Extend list by appending elements from the iterable.

index(value, start=0, stop=9223372036854775807, /) method of builtins.list instance
    Return first index of value.

    Raises ValueError if the value is not present.

insert(index, object, /) method of builtins.list instance
    Insert object before index.

pop(index=-1, /) method of builtins.list instance
    Remove and return item at index (default last).

    Raises IndexError if list is empty or index is out of range.

remove(value, /) method of builtins.list instance
    Remove first occurrence of value.

    Raises ValueError if the value is not present.

reverse() method of builtins.list instance
    Reverse *IN PLACE*.

sort(*, key=None, reverse=False) method of builtins.list instance
    Sort the list in ascending order and return None.

    The sort is in-place (i.e. the list itself is modified) and stable (i.e. the
    order of two equal elements is maintained).

    If a key function is given, apply it once to each list item and sort them,
    ascending or descending, according to their function values.

    The reverse flag can be set to sort in descending order.
"""
